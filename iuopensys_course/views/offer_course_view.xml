<?xml version="1.0" ?>
<openerp>
	<data>
		<!-- Action -->
		<record model="ir.actions.act_window" id="offer_course_main_action">
			<field name="name">Offer Course List</field>
			<field name="res_model">offer.course</field>
			<field name="view_mode">tree,form</field>
			<field name="context">{'search_default_filter_theory_course':1}</field>
		</record>
		
		<!-- Tree View -->
		<record id="offer_course_main_tree_view" model="ir.ui.view">
			<field name="name">Offer Course List</field>
			<field name="model">offer.course</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="Course List" class="my_class"
					colors="red:avail_students==0">
					<field name="course_code"/>
					<field name="name"/>
					<field name="course_id" invisible="1"/>
					<field name="department_id" invisible="1"/>
					<field name="dept_academic_code"/>					
					<field name="course_group"/>
					<field name="number_credits_actual" string="Crds Tuition"/>
					<field name="numb_students"/>
					<field name="avail_students"/>
					<field name="academic_year_id"/>
					<field name="semester_id"/>					
					<field name="display_study_daytime"/>
					<field name="display_room"/>
					<field name="display_lecturer"/>
					<field name="display_course_period"/>
				</tree>
			</field>
		</record>
		
		<!-- Form View -->
		<record id="offer_course_main_form_view" model="ir.ui.view">
			<field name="name">Course</field>
			<field name="model">offer.course</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form>
					<sheet>
						<div class="oe_button_box" name="my_button_box" groups="iuopensys_core.group_staff">
                           <!--  <button name="print_student" type="object" class="oe_stat_button" icon="fa-print" string="Exam-ready students">
                            </button> -->
                          	<button string="Add Students"
                            	class="oe_stat_button"
                            	name="%(iuopensys_course.student_course_addition_wizard_action)d"
                            	type="action"
                            	context="{'default_offer_course_id':active_id}"
                            	icon="fa-plus-square"/>
                            <button string="Add Student"
                            	class="oe_stat_button"
                            	name="%(iuopensys_course.one_student_course_addition_wizard_action)d"
                            	type="action"
                            	context="{'default_offer_course_id':active_id}"
                            	icon="fa-plus"/>
                            <button string="Exam Attendance"
                            	class="oe_stat_button"
                            	name="print_exam_student_list"
                            	type="object"
                            	icon="fa-print"/>
                            <!-- <button string="Add Students"
                            	class="oe_stat_button"
                            	name="call_student_course_addition_wizard"
                            	type="object"
                            	icon="fa-print"/> -->
                        </div>
						<div class="oe_title">
                            <label for="name" class="oe_edit_only" string="Course Name"/>
                            <h1>
                            	<field name="name" required="1" class="oe_inline"/>
                            </h1>
                            <label for="course_code" class="oe_edit_only" string="Course Code"/>
                            <h2>
                            	<field name="course_code"/>
                            </h2>
                            
                        </div>
                        
                        <group colspan="4">
          					<group string="Course Information">
          						<group>
          							<field name="course_id" options="{'no_create':True}"/>
          							<field name="department_id" options="{'no_create':True}"/>
          							<field name="academic_year_id" options="{'no_create':True}"/>
          							<field name="semester_id" options="{'no_create':True}"/>
          							<field name="course_group"/>
          							<field name="lab_sect_display" invisible="1"/>
          							<field name="has_lab" attrs="{'invisible':[('lab_sect_display','=',True),('is_lab','=',True)]}"/>
          							<field name="is_lab" 
          								attrs="{'invisible':[('lab_sect_display','=',False)]}"/>
          							<field name="theory_course_id" attrs="{'invisible':[('is_lab','=',False)]}"/>
          							<field name="lab_type" attrs="{'invisible':[('is_lab', '=', False)]}"/>
          						</group>
          						<group>          							
          							<field name="lecturer_id" options="{'no_create':True}"/>
          							<field name="assign_room"/>
          							<field name="numb_students"/>
          							<field name="avail_students"/>
          							<field name="number_credits" invisible="1"/>          							
          							<field name="tuition_id"/>
          							<field name="number_credits_actual"/>
          							<field name="amount_session"/>
          							<field name="display_study_daytime" invisible="1"/>
          							<field name="display_lecturer" invisible="1"/>
          							<field name="display_room" invisible="1"/>
          							<field name="display_course_period" invisible="1"/>
          							<field name="crs_tuition" invisible="1"/>
          						</group>
          					</group>          					
                        </group>
                        <notebook>
                        	<page string="Course Schedule">
                        		<div>	                        		
                        			<field name="study_session_ids" nolabel="1" context="{'default_offer_course_id':active_id}">
                        				<tree editable="bottom">
                        					<field name="name"/>
                        					<field name="offer_course_id" invisible="1"/>
                        					<field name="crs_day"/>                        					
                        					<field name="start_date"/>
                        					<field name="end_date"/>
                        					<field name="time_start_morning" invisible="1"/>
                        					<field name="time_start_afternoon" invisible="1"/>
                        					<field name="default_period_length" invisible="1"/>
                        					<field name="study_period_start"/>
                        					<field name="amount_period"/>
                        					<field name="start_time" widget="float_time"/>
                        					<field name="end_time" widget="float_time"/>
                        					<field name="duration" widget="float_time"/>
                        					<field name="is_recurrency"/>
                        					<field name="is_summer"/>
                        				</tree>
                        			</field>
                        		</div>
                        	</page>
                        	<page string="Lab Schedule">
                        		<div>
                        			<field name="lab_course_ids" nolabel="1" 
                        				context="{'default_theory_course_id':active_id,'default_is_lab':True,'default_lab_sect_display':True,'default_has_lab':False}"
                        				attrs="{'invisible':[('has_lab','=',False)]}"/>                        				
                        		</div>
                        	</page>
                        	<page string="Exam Schedule">
                        		<div>
                        			<field name="exam_session_ids" nolabel="1" context="{'default_offer_course_id':active_id}">
                        				<tree editable="bottom">
                        					<field name="name"/>
                        					<field name="offer_course_id" invisible="1"/>
                        					<field name="start_date"/>
                        					<field name="end_date" invisible="1"/>
                        					<field name="start_time" widget="float_time"/>
                        					<field name="end_time" widget="float_time"/>
                        					<field name="duration" widget="float_time"/>                        					
                        					<field name="is_exam"/> 
                        					<field name="exam_type" attrs="{'invisible': [('is_exam','=',False)]}"/>
                        					<field name="proctor_one_id"/>
                        					<field name="proctor_two_id"/>                      					
                        				</tree>
                        			</field>
                        		</div>
                        	</page>
                        	<page string="Academic Information">
                        		<group colspan="4" string="Grade Distribution">                       			           
                        			<group>
                        				<field name="assignment_percent" widget="percentage"/>
                        				<field name="mid_exam_percent" widget="percentage"/>                        				
                        			</group>
                        			<group>
                        				<field name="final_exam_percent" widget="percentage"/>
                        			</group>
                        		</group>                        		
                        	</page>
       						<page string="Student List">
       							<group colspan="4">
       								<field name="student_course_ids" nolabel="1">
       									<tree create="false" editable="bottom">
       										<field name="studentId" fg_color="red:exam_status==False"/>
       										<field name="student_lname" fg_color="red:exam_status==False"/>
       										<field name="student_fname" fg_color="red:exam_status==False"/>
       										<field string="Class Code" name="student_class_code"/> 
       										<field name="assignment_score" string="Assign. Score" groups="iuopensys_core.group_staff"/>    										       										
       										<field name="mid_score" string="Midterm Score" groups="iuopensys_core.group_staff"/>
       										<field name="final_score" string="Final Score" groups="iuopensys_core.group_staff"/>
       										<field name="course_gpa" string="GPA" groups="iuopensys_core.group_staff"/>
       										<field name="is_complete" groups="iuopensys_core.group_staff"/>     										
       										<field name="exam_status" string="Exam Eligibility" groups="iuopensys_core.group_staff"/>
       									</tree>
       								</field>
       							</group>
       						</page>
       						<page string="Attendance" groups="iuopensys_core.group_staff">
       							<group>
       								<field name="student_attendance_ids" nolabel="1">
       									<tree create="false" editable="bottom">
       										<field name="studentId"/>
       										<field name="student_lname"/>
       										<field name="student_fname"/>
       										<field name="s1"/>
       										<field name="s2"/>
       										<field name="s3"/>
       										<field name="s4"/>
       										<field name="s5"/>
       										<field name="s6"/>
       										<field name="s7"/>
       										<field name="s8"/>
       										<field name="s9"/>
       										<field name="s10"/>
       										<field name="s11"/>
       										<field name="s12"/>
       										<field name="s13"/>
       										<field name="s14"/>
       										<field name="s15"/>
       									</tree>
       								</field>
       							</group>
       						</page>      						
       					</notebook>	
					</sheet>
				</form>
			</field>
		</record>
		
		<!-- Search View -->
		<record id="offer_course_main_search_view" model="ir.ui.view">
			<field name="name">Search</field>
			<field name="model">offer.course</field>
			<field name="type">search</field>
			<field name="arch" type="xml">
				<search string="Search">
					<!-- Search By -->
					<field name="name"/>
					<field name="course_code"/>
					<field name="course_id"/>
					<field name="course_group"/>
					<field name="department_id"/>
					<field name="academic_year_id"/>
					<field name="lecturer_id"/>
					<field name="assign_room"/>
					<field name="semester_id"/>
					
					<!-- Group By -->
					<group expand="1" string="Group By">
						<fitler string="Parent Course"
							context="{'group_by':'course_id'}"/>
						<filter string="Department"
							context="{'group_by':'department_id'}"/>
						<filter string="Academic Year"
							context="{'group_by':'academic_year_id'}"/>
						<filter string="Semester"
							context="{'group_by':'semester_id'}"/>
						<filter string="Lab"
							domain="[('is_lab', '=', True)]" context="{'group_by':'course_id'}"/>
					</group>
						
					<!-- Filter -->
					<filter name="filter_lab_course" string="Filter Lab Courses"
						domain="[('is_lab','=',True)]"/>
					<filter name="filter_theory_course" string="Filter Theory Courses"
						domain="[('is_lab','=',False)]"/>
					<filter name="filter_extra_curricular" string="Filter Extra-Curriculars"
						domain="[('course_id.is_extra_curricular','=', True)]"/>	
				</search>
			</field>
		</record>
		
	</data>
</openerp>