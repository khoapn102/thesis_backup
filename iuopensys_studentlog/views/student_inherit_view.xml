<?xml version="1.0" ?>
<openerp>
	<data>
		<record id="student_main_tree_view_inherit_new" model="ir.ui.view">
			<field name="name">student.tree.view.inherit.new</field>
			<field name="model">student</field>
			<field name="inherit_id" ref="iuopensys_core.student_main_tree_view"/>
			<field name="arch" type="xml">
				<tree>
					<field name="graduation_status" fg_color="green:graduation_status in ['graduated']" groups="iuopensys_core.group_staff" string="Status"/>
					<field name="trigger_grad_status" invisible="1" groups="iuopensys_core.group_staff"/>
				</tree>
			</field>
		</record>
		<record id="student_main_form_view_inherit_new" model="ir.ui.view">
			<field name="name">student.form.view.inherit.new</field>
			<field name="model">student</field>
			<field name="inherit_id" ref="iuopensys_core.student_main_form_view"/>
			<field name="arch" type="xml">
				<header>
					<button string="Complete Major"
							type="object"
							name="set_complete_major"
							class="oe_highlight"
							attrs="{'invisible':[('graduation_status', 'in',['ie','complete','readygrad','graduated'])]}"
							groups="iuopensys_core.group_staff"/>
					<button string="Ready to Graduate"
							type="object"
							name="set_ready_to_graduate"
							class="oe_highlight"
							attrs="{'invisible':[('graduation_status', 'in',['ie','ontrack','readygrad','graduated'])]}"
							groups="iuopensys_core.group_staff"/>
					<button string="Graduated"
							type="action"
							name="%(iuopensys_studentlog.add_graduation_date_wizard_action)d"
							class="oe_highlight"
							attrs="{'invisible':[('graduation_status', 'in',['ie','ontrack','complete','graduated'])]}"
							context="{'default_student_id':active_id}"
							groups="iuopensys_core.group_staff"/>
					<button string="Cancel"
							type="object"
							name="set_ontrack"
							attrs="{'invisible':[('graduation_status', 'in',['ie','ontrack'])]}"
							groups="iuopensys_core.group_staff"/>
					
					<field name="graduation_status" widget="statusbar"/>
					
				</header>
				
				<!-- For Trigger Grad status UI only -->
				<xpath expr="//field[@name='financial_aid_id']" position="after">
					<field name="trigger_grad_status" groups="iuopensys_core.group_staff" invisible="1"/>
				</xpath>
				
				<xpath expr="//div[1]" position="inside">
					<button string="Print Transcript"
						class="oe_stat_button"
						icon="fa-print"
						type="object"
						name="print_student_transcript"
						groups="iuopensys_core.group_staff"/>
					<button string="Print Progress"
						class="oe_stat_button"
						icon="fa-print"
						type="object"
						name="print_student_progress"
						groups="iuopensys_core.group_staff"/>
				</xpath>
				<xpath expr="//field[@name='max_grad_date']" position="after">
					<field name="graduation_date" attrs="{'invisible':[('graduation_status','in',('ie','ontrack'))]}"
						groups="iuopensys_core.group_staff"/>
				</xpath>
				<xpath expr="//page[6]" position="after">
					<page string="Student Progress">
						<notebook>							
							<page string="Major Program">
								<group string="General">
									<group>
										<field name="major_total_credits"/>
										<field name="major_accumulated_credits"/>
										<field name="major_total_not_count_credits"/>
									</group>
									<group>
										<field name="major_achieved_credits"/>
										<field name="major_incomplete_credits"/>
										<field name="major_not_count_achieved_credits"/>
									</group>
								</group>
								<notebook>
									<page string="Incompleted Courses">
										<group attrs="{'invisible':[('major_incomplete_credits','=',0)]}">
											<field name="major_course_not_complete_ids" nolabel="1">
												<tree edit="false">
													<field name="name"/>
													<field name="department_id"/>
													<field name="number_credits"/>
													<field name="prereq_course_id" string='Pre-req. Course'/>
													<field name="course_type" string="Type"/>
													<field name="crs_lang" string="Language"/>
												</tree>
											</field>
										</group>
										<group attrs="{'invisible':[('major_incomplete_credits','>',0)]}">
											<field name="empty_major_course_ids" nolabel="1">
												<tree edit="false" create="false" delete="false">
													<field name="name"/>
													<field name="department_id"/>
													<field name="number_credits"/>
													<field name="prereq_course_id" string='Pre-req. Course'/>
													<field name="course_type" string="Type"/>
													<field name="crs_lang" string="Language"/>
												</tree>
											</field>
										</group>
									</page>
									<page string="Completed Courses">
										<group>
											<field name="major_course_complete_ids" nolabel="1">
												<tree edit="false">
													<field name="course_name"/>
													<field name="department_id"/>
													<field name="course_credits"/>
													<field name="prereq_course_id" string='Pre-req. Course'/>
													<field name="course_type"/>
													<field name="crs_lang" string="Language"/>
												</tree>
											</field>
										</group>
									</page>
								</notebook>								
							</page>
							<page string="English and IU Programs">
								<group string="English Program">
									<group>
										<field name="is_eng_req" string="Require IE Program"
											attrs="{'readonly':[('is_eng_complete','=',True)]}"/>	
									</group>
									<group>
										<field name="eng_curriculum_id" attrs="{'invisible':['|',('is_eng_req','=',False),('is_eng_complete','=',True)]}"
											domain="[('is_eng_curr','=',True)]" options="{'no_create':True}"/>
											<!-- attrs="{'invisible':[('is_eng_req','!=',False)],
													'readonly':[('is_eng_complete','=',True)]}" -->
										<field name="is_eng_complete" attrs="{'invisible':[('eng_curriculum_id','=',False),('is_eng_req','=',False)]}"/>
									</group>
								</group>
								<group string="IU Programs">
									<notebook>
										<page string="Incomplete Programs">
											<group>
												<field name="academic_program_course_not_complete_ids" nolabel="1">
													<tree edit="false">
														<field name="name"/>
														<field name="department_id"/>
														<field name="course_type"/>
														<field name="crs_lang" string="Language"/>
													</tree>
												</field>
											</group>
										</page>
										<page string="Completed Programs">
											<group>
												<field name="academic_program_course_complete_ids" nolabel="1">
													<tree edit="false">
														<field name="course_name" string="Course Name"/>
														<field name="department_id"/>
														<field name="course_type"/>
														<field name="crs_lang" string="Language"/>
													</tree>	
												</field>
											</group>
										</page>
									</notebook>
								</group>
							</page>
							<page string="Documents">
		               			<notebook>
		               				<page string="Uncompleted Documents">
		               					<group>
		               						<field name="student_document_not_submit_ids" nolabel="1">
		               							<tree edit="false">
		               								<field name="name"/>
		               								<field name="doc_type"/>
		               								<field name="submit_deadline"/>
		               								<field name="note"/>
		               								<field name="is_optional"/>
		               							</tree>
		               						</field>
		               					</group>
		               				</page>
		               				<page string="Submitted Documents">
		               					<group string="Document List">
				               				<field name="student_document_ids" nolabel="1">
				               					<tree edit="false" create="false">
				               						<field name="iu_doc_id"/>
				               						<field name="is_submit"/>
				               						<field name="is_stored"/>
				               						<field name="submit_deadline"/>
				               					</tree>
				               				</field>
				               			</group>
		               				</page>
		               			</notebook>
		               		</page>
		               		<page string="Scholarships">
								<group>
									<field name="student_financial_aid_ids" nolabel="1">
										<tree create="false" delete="false">
											<field name="student_id"/>
											<field name="financial_aid_id"/>
											<field name="is_active"/>
											<button name="set_is_active" type="object" string="Active/Inactive" groups="iuopensys_core.group_staff"/>
										</tree>
									</field>
								</group>
							</page>
						</notebook>
					</page>
					<page string="Progress Logs" groups="iuopensys_core.group_staff">
						<field name="student_log_ids" context="{'default_student_id':active_id}">
							<tree edit="false" create="false">
								<field name="field_change_name" string="Change"/>
								<field name="old_value" string="From"/>
								<field name="new_value" string="To"/>
								<field name="modified_date" string="Complete on"/>
							</tree>
						</field>
					</page>					
				</xpath>
			</field>
		</record>
		
		<!-- English Curriculum Readonly -->
		<record id="student_form_view_readonly" model="ir.ui.view">
			<field name="name">student.form.view.readonly</field>
			<field name="model">student</field>
			<field name="inherit_id" ref="iuopensys_core.student_main_form_view"/>
			<field name="groups_id" eval="[(6,0,[ref('iuopensys_core.group_student')])]"/>
			<field name="arch" type="xml">
				<field name="is_eng_req" position="attributes">
					<attribute name="readonly">1</attribute>
				</field>
				<field name="eng_curriculum_id" position="attributes">
					<attribute name="readonly">1</attribute>
				</field>
				<field name="is_eng_complete" position="attributes">
					<attribute name="readonly">1</attribute>
				</field>
				<field name="student_balance" position="attributes">
					<attribute name="readonly">1</attribute>
				</field>
				<field name="exam_status" position="attributes">
					<attribute name="readonly">1</attribute>
				</field>
				<field name="login" position="attributes">
					<attribute name="readonly">1</attribute>
				</field>
				<field name="department_id" position="attributes">
					<attribute name="readonly">1</attribute>
				</field>
				<field name="major_id" position="attributes">
					<attribute name="readonly">1</attribute>
				</field>
				<field name="image" position="attributes">
					<attribute name="readonly">1</attribute>
				</field>
				<field name="last_name" position="attributes">
					<attribute name="readonly">1</attribute>
				</field>
				<field name="name" position="attributes">
					<attribute name="readonly">1</attribute>
				</field>
				<field name="academic_year_id" position="attributes">
					<attribute name="readonly">1</attribute>
				</field>
				<field name="year_batch_id" position="attributes">
					<attribute name="readonly">1</attribute>
				</field>
				<field name="studentId" position="attributes">
					<attribute name="readonly">1</attribute>
				</field>
				<field name="financial_aid_id" position="attributes">
					<attribute name="readonly">1</attribute>
				</field>
				<field name="academic_status" position="attributes">
					<attribute name="readonly">1</attribute>
				</field>
				<field name="academic_program_course_complete_ids" position="attributes">
					<attribute name="readonly">1</attribute>
				</field>
				<field name="gender" position="attributes">
					<attribute name="readonly">1</attribute>
				</field>
				<field name="birthdate" position="attributes">
					<attribute name="readonly">1</attribute>
				</field>
				<field name="ethnic" position="attributes">
					<attribute name="readonly">1</attribute>
				</field>							
			</field>
		</record>
		
		<!-- Extend Search view -->
		<record id="student_inherit_search_view" model="ir.ui.view">
			<field name="name">Search Student</field>
			<field name="model">student</field>
			<field name="inherit_id" ref="iuopensys_core.student_main_search_view"/>
			<field name="arch" type="xml">
				<xpath expr="//search" position="inside">
					<filter string="IE Students" name="filter_ie_student" domain="[('graduation_status','=','ie')]"/>
					<filter string="Complete Major" name='filter_complete_student' domain="[('graduation_status','=','complete')]"/>
					<filter string="Ready to Graduate" name='filter_ready_student' domain="[('graduation_status','=','readygrad')]"/>
					<filter string="Alumni" name="filter_grad_student" domain="[('graduation_status','=','grad')]"/>
					<filter string="Current Students" name="filter_current_student" domain="[('graduation_status','in',['ie','ontrack','complete'])]"/>
				</xpath>
			</field>
		</record>
		
	</data>
</openerp>